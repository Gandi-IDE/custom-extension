var _biter_icon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAFACAIAAABC8jL9AAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV/TSqtUHOwg4pChOtlFRRxLFYtgobQVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqvGVDMQB1TNMjLJhJgvrIrBVwQQQhh+9EvM1FPZxRw8x9c9fHy9i/Es73N/jkGlaDLAJxLHmW5YxBvEs5uWznmfOMIqkkJ8Tjxp0AWJH7kuu/zGueywwDMjRi4zTxwhFss9LPcwqxgq8QxxVFE1yhfyLiuctzirtQbr3JO/MFzUVrJcpzmGJJaQQhoiZDRQRQ0WYrRqpJjI0H7Cwz/q+NPkkslVBSPHAupQITl+8D/43a1Zmp5yk8IJoO/Ftj/GgeAu0G7a9vexbbdPAP8zcKV1/fUWMPdJerOrRY+AoW3g4rqryXvA5Q4w8qRLhuRIfppCqQS8n9E3FYDhW2Bgze2ts4/TByBHXS3fAAeHwESZstc93h3q7e3fM53+fgAVT3KBuWXB3QAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cECAwFDxNzHwUAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACuUlEQVR42u3c0Y3CQAxF0Ril/5ZNBSMlMsHK+JwGlh1xZb7ecQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMFtP+4czseegI3zZ+7uMJQMCAgAEBg4ABAQMCBgQMAgYEDAgYBAwIGBAwIGAQMCBgQMCAgGEPrxxqquxadW1TvfEz4wIDAgYEDAIGBAwIGAQMCBgQMCBgEDAgYEDAgIBBwICAAQGDgAEBA39yeoLrKrtW4AIDAgYBAwIGBAwCBgQMCBgQMAgYEDAgYEDAIGBAwICAQcCAgAEBA0vjNrEqu1YR0fJ3wQUGAQMCBgQMAgYEDAgYEDAIGBAwIGBAwCBgQMCAgEHAgIABAQMChs2N28Sq7FqBCwwIGBAwCBgQMCBgEDAgYEDAgIBBwICAAQGDgAEBAwIGBAwCBgQMPGLcQFRm9jy0LS5cYEDAIGBAwICAQcCAgAEBAwIGAQMCBgQMCBgEDAgYEDAIGBAwIGBgxVATj7A95gIDAgYBAwIGBAwIGAQMCBgQMAgYEDAgYEDAIGBAwICAQcCAgAEBAzecnoCVyq5VZZuqa0/LBQYEDAgYBAwIGBAwIGAQMCBgQMAgYEDAgIABAYOAAQEDAgYEDAIG2tjEYqmya4ULDAgYBAwIGBAwIGAQMCBgQMAgYEDAgIABAYOAAQEDAgYBAwIGBAwIGAQMCBgQMCBgEDAgYEDAIGBAwICAAQGDgAEBAwIGBAwCBgQMCBgEDAgYEDAgYBAwIGBAwICAQcCAgAEBg4ABAQMCBgQMAgYEDAgYBAwIGBAwcFl4AlYyc1YM8b4cXGDwExoQMCBgEDAgYEDAgIBBwICAAQGDgAEBAwIGBAwCBgQMCBgQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwhS8zJiLjQXSIkgAAAABJRU5ErkJggg==";
var _biter_cover = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAF0CAYAAAD/4EcMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAlrSURBVHhe7dxBbttYFkDRsMe9nJ5L2ZNrFVmUvYBeTuasCsABUfiREPHSFOVzgIf8iSxSlpELDt50ubzN3wAAyPxn+RcAgIjAAgCICSwAgJjAAgCICSwAgJjAAgCICSwAgJjAAgCICSwAgJjAAgCICSwAgJjAAgCICSwAgJjAAgCICSwAgNh0ubzNyxn4l4+PH8uJM5qmaTlxRv/8/7Sc4Hw8wQIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksOLFpmg4djjXP880BjiOwAABiAgsAICawAABiAgsAICawAABiAgsAICawAABiAgue2Gj31HpGu48+c0bXtB62GX3m6wGel8ACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACAIhNl8ubZSrwGx8fP5bTPu7tirq362jr6/d29PU9+y6uvX+/z37/91yv1+X0mHn+33KCz+cJFgBATGABAMQEFgBATGABAMQEFgBATGABAMQEFgBATGABHOTXnqpbA5yXwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksOLF5nm/OaLfSegDYh8ACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACAIgJLHhho91Y6xntxloPAI8RWAAAMYEFABATWAAAMYEFABATWAAAMYEFABATWAAAselyeZuXM/AvHx8/ltM+7u2a+rWr6khbr+/o+3v1XV5bP/9nd71el9Nj7r3+/f3ncoKeJ1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQea5/nmTNN0c/Y2uqb1jK5pPaPXrAfgVQksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwIInNtodtZ7R7qnPnNE1reerG30m5dwzes2fDPA4gQUAEBNYAAAxgQUAEBNYAAAxgQUAEBNYAAAxgQUAEBNYcGKj3UWfOdw22h12pgEeJ7AAAGICCwAgJrAAAGICCwAgJrAAAGICCwAgJrAAAGICCwAgJrAAAGICCwAgJrAAAGICCwAgJrAAAGICCwAgJrAAAGICC26YpsmceOZ5NiceODOBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1jwhc3zfHPY1zRNhw6wH4EFABATWAAAMYEFABATWAAAMYEFABATWAAAMYEFABATWPDCRrut1sO+Rrun1jP6nXzmjK5pPcDjBBYAQExgAQDEBBYAQExgAQDEBBYAQExgAQDEBBYAQExgwYmNdhutZ7TbaD1sM/pM1zP6naxn9Jr17G10TesZXdN6gN8TWAAAMYEFABATWAAAMYEFABATWAAAMYEFABATWAAAMYEFJzbaTbQeAI4hsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYgIL4CDzPN+c0W6z9QDPS2ABAMQEFgBATGABAMQEFgBATGABAMQEFgBATGABAMQEFsCTGu3GWs9oN9Z6gOMILACAmMACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACOKnRbqz1jHZjrQfYj8ACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACAIgJLACAmMACAIgJLIAHzfN8c6Zpujl7G13TekbXtJ7Ra9YD/J7AAgCICSwAgJjAAgCICSwAgJjAAgCICSwAgJjAAgCICSx4YqPdQ+XcM3rNn8xXN/pM1jPaPfWZM7qm9QCPE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBU9stLvoTMNto91TnznAfgQWAEBMYAEAxAQWAEBMYAEAxAQWAEBMYAEAxAQWAEBMYAEAxAQWAEBMYAEAxAQWAEBMYAEAxAQWAEBMYAEAxAQWAEBsulze5uUMPJlp+v9yAv7U9XpdTmPv7z+XE/Q8wQIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiAksAICYwAIAiE2Xy9u8nA/x8fFjOR3jev1rOfGKfL+2+f79v8sJXs/7+8/lBD1PsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYqffg7V1z9DR7882vj8APCNPsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYvZg7fz+9jRt4/qPvX74yvz9soUnWAAAMYEFABATWAAAMYEFABATWAAAMYEFABATWAAAsdPvwdrq1feU2CPl+oHH+PtlC0+wAABiAgsAICawAABiAgsAICawAABiAgsAICawAABip9+DtXXPyN7v/+w/f6u997ycfQ+N3/++9r7/Z/9+b7X1/lz/Ns9+/V/9893KEywAgJjAAgCICSwAgJjAAgCICSwAgJjAAgCICSwAgJg9WDu//6vf395c/9f+frm/27be3z2v/vnf4/t329E//9l5ggUAEBNYAAAxgQUAEBNYAAAxgQUAEBNYAAAxgQUAEBNYwMv6tYdnywA8SmABAMQEFgBATGABAMQEFgBATGABAMQEFgBATGABAMSmy+VtXs6HOHrXzPX613Lax9b7++rXd8/R1+/9933/s38/73n2+/P9fu33P/vPf3aeYAEAxAQWAEBMYAEAxAQWAEBMYAEAxAQWAEBMYAEAxA7fgwV72rqHZau997i8+v3dc/T93/Pqe4L2/vyf/fM7+/vfc/bP52ieYAEAxAQWAEBMYAEAxAQWAEBMYAEAxAQWAEBMYAEAxOzBghP76ntmAJ6VJ1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAADGBBQAQE1gAALHpcnmblzMAAAFPsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAYgILACAmsAAAUt++/Q2QMhv6Vvkp8gAAAABJRU5ErkJggg=="

const extensionId = 'Biter';
// 真是令人费解~
class Biter {
	constructor (runtime) {
		BigInt.prototype.toJSON = function () { return '' + this; }
		this.runtime = runtime;
		this._formatMessage = runtime.getFormatMessage({
			'zh-cn': {
				"Biter.name": "Biter",
				"Biter.BitOperator": "位运算",
				"Biter.and": "[A]&[B]",
				"Biter.or" : "[A]|[B]",
				"Biter.xor": "[A]^[B]",
				"Biter.not": "~[A]",
				"Biter.shl": "[A]<<[B]",
				"Biter.shr": "[A]>>[B]",

				"Biter.NumberBase": "进制转换",
				"Biter.Dec2Bin": "十进制[A]转换为二进制",
				"Biter.Bin2Dec": "二进制[A]转换为十进制",
				"Biter.Dec2Hex": "十进制[A]转换为十六进制",
				"Biter.Bin2Hex": "二进制[A]转换为十六进制",
				"Biter.Hex2Dec": "十六进制[A]转换为十进制",
				"Biter.Hex2Bin": "十六进制[A]转换为二进制",
				"Biter.Rad2Rad": "[R]进制的[A]转化为[B]进制",
				"Biter.Dec2Rad": "十进制[A]转化为[B]进制",
				"Biter.Rad2Dec": "[R]进制的[A]转化为十进制"
			}, 'en': {
				"Biter.name": "Biter",
				"Biter.BitOperator": "Bitwise Operators",
				"Biter.and": "[A]&[B]", 
				"Biter.or": "[A]|[B]",
				"Biter.xor": "[A]^[B]",
				"Biter.not": "~[A]",
				"Biter.shl": "[A]<<[B]",
				"Biter.shr": "[A]>>[B]",
				
				"Biter.NumberBase": "Number Base Conversion",
				"Biter.Dec2Bin": "Decimal [A] to Binary",
				"Biter.Bin2Dec": "Binary [A] to Decimal",
				"Biter.Dec2Hex": "Decimal [A] to Hexadecimal",
				"Biter.Bin2Hex": "Binary [A] to Hexadecimal",
				"Biter.Hex2Dec": "Hexadecimal [A] to Decimal",
				"Biter.Hex2Bin": "Hexadecimal [A] to Binary",
				"Biter.Rad2Rad": "[R] based [A] to [B] based",
				"Biter.Dec2Rad": "Decimal [A] to [B] based",
				"Biter.Rad2Dec": "[R] based [A] to Decimal"
			},
		});
	}
	formatMessage(id){
		return this._formatMessage({
			id,
			default: id,
			description: id
		});
	}

	b(block, func) {

		// 我懒得上下翻代码页面来定义函数就这样写

		eval("this."+block.opcode+"=func");
		return block;
	}

	getInfo() {
		return {
			id: extensionId,
			name: this.formatMessage('Biter.name'),
			color1: '#000000',
			
			menuIconURI: _biter_icon,
			blockIconURI: _biter_icon,
			
			docsURI: 'https://learn.ccw.site/post/2026b330-5d8f-4acd-b799-d5ee5622a84e',
			
			blocks: [
				"---"+this.formatMessage("Biter.BitOperator"),
				this.b({
					opcode: "and",
					blockType: "reporter",
					text: this.formatMessage("Biter.and"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 47,
						},
						B: {
							type: "number",
							defaultValue: 28,
						}
					}
				}, ({A, B}) => BigInt(A) & BigInt(B)),
				this.b({
					opcode: "or",
					blockType: "reporter",
					text: this.formatMessage("Biter.or"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 47,
						},
						B: {
							type: "number",
							defaultValue: 28,
						}
					}
				}, ({A, B}) => BigInt(A) | BigInt(B)),
				this.b({
					opcode: "xor",
					blockType: "reporter",
					text: this.formatMessage("Biter.xor"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 47,
						},
						B: {
							type: "number",
							defaultValue: 28,
						}
					}
				}, ({A, B}) => BigInt(A) ^ BigInt(B)),
				this.b({
					opcode: "shl",
					blockType: "reporter",
					text: this.formatMessage("Biter.shl"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 47,
						},
						B: {
							type: "number",
							defaultValue: 28,
						}
					}
				}, ({A, B}) => BigInt(A) << BigInt(B)),
				this.b({
					opcode: "shr",
					blockType: "reporter",
					text: this.formatMessage("Biter.shr"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 47,
						},
						B: {
							type: "number",
							defaultValue: 28,
						}
					}
				}, ({A, B}) => BigInt(A) >> BigInt(B)),
				this.b({
					opcode: "not",
					blockType: "reporter",
					text: this.formatMessage("Biter.not"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 38,
						},
					}
				}, ({A, B}) => ~BigInt(A)),
				
				"---"+this.formatMessage("Biter.NumberBase"),
				this.b({
					opcode: "Dec2Bin",
					blockType: "reporter",
					text: this.formatMessage("Biter.Dec2Bin"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 3791,
						},
					}
				}, ({A}) => {
					let result = Number(A).toString(2);
					if (result == "NaN") return '';
					return result;
				}),
				this.b({
					opcode: "Bin2Dec",
					blockType: "reporter",
					text: this.formatMessage("Biter.Bin2Dec"),
					arguments: {
						A: {
							type: "string",
							defaultValue: "10010101",
						},
					}
				}, ({A}) => parseInt(A, 2) || ''),
				this.b({
					opcode: "Dec2Hex",
					blockType: "reporter",
					text: this.formatMessage("Biter.Dec2Hex"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 3758,
						},
					}
				}, ({A}) => {
					let result = Number(A).toString(16);
					if (result == "NaN") return '';
					return result;
				}),
				this.b({
					opcode: "Bin2Hex",
					blockType: "reporter",
					text: this.formatMessage("Biter.Bin2Hex"),
					arguments: {
						A: {
							type: "string",
							defaultValue: "100101"
						},
					}
				}, ({A}) => {
					let result = Number(A).toString(16);
					if (result == "NaN") return '';
					return result;
				}),
				this.b({
					opcode: "Hex2Dec",
					blockType: "reporter",
					text: this.formatMessage("Biter.Hex2Dec"),
					arguments: {
						A: {
							type: "string",
							defaultValue: "ab18",
						},
					}
				}, ({A}) => parseInt(A, 16) || ''),
				this.b({
					opcode: "Hex2Bin",
					blockType: "reporter",
					text: this.formatMessage("Biter.Hex2Bin"),
					arguments: {
						A: {
							type: "string",
							defaultValue: "39abfc",
						},
					}
				}, ({A}) => {
					let result = parseInt(A, 16).toString(2);
					if (result == "NaN") return '';
					return result;
				}),
				this.b({
					opcode: "Rad2Rad",
					blockType: "reporter",
					text: this.formatMessage("Biter.Rad2Rad"),
					arguments: {
						R: {
							type: "number",
							defaultValue: 12,
						},
						A: {
							type: "string",
							defaultValue: "38baa1",
						},
						B: {
							type: "number",
							defaultValue: 11,
						},
					}
				}, ({R, A, B}) => {
					let result = parseInt(A, Number(R)).toString(Number(B));
					if (result == "NaN") return '';
					return result;
				}),
				this.b({
					opcode: "Dec2Rad",
					blockType: "reporter",
					text: this.formatMessage("Biter.Dec2Rad"),
					arguments: {
						A: {
							type: "number",
							defaultValue: 3917
						},
						B: {
							type: "number",
							defaultValue: 8
						},
					}
				}, ({A, B}) => {
					let result = Number(A).toString(Number(B));
					if (result == "NaN") return '';
					return result;
				}),
				this.b({
					opcode: "Rad2Dec",
					blockType: "reporter",
					text: this.formatMessage("Biter.Rad2Dec"),
					arguments: {
						R: {
							type: "number",
							defaultValue: 12,
						},
						A: {
							type: "string",
							defaultValue: "380ab",
						},
					}
				}, ({R, A}) => parseInt(A, Number(R)) || ''),
			],
		};
	}
}

window.tempExt = {
	Extension: Biter,
	info: {
		name: "Biter.name",
		description: "Biter.descp",
		extensionId,
		iconURL: _biter_cover,
		insetIconURL: _biter_icon,
		featured: true,
		disabled: false,
		collaborator: "X10-Cookiez @ CCW"
	},
	l10n: {
		"zh-cn": {
			"Biter.name": "位运算",
			"Biter.descp": "真是令人费解"
		},
		en: {
			"Biter.name": "Bit Operator",
			"Biter.descp": "Bit stuff"
		}
	}
};
